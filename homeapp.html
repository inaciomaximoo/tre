<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage do Aplicativo de Estudos</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      /* CSS :root e Reset */
      :root {
        --bg-gradient-start: #ece9e6;
        --bg-gradient-end: #ffffff;
        --primary: #2979ff;
        --primary-dark: #1c54b2;
        --accent: #00c853;
        --accent-light: #0cd85a; /* Ajustado para melhor contraste/uso */
        --danger: #f44336;
        --danger-light: #ffebee;
        --text: #263238;
        --text-light: #546e7a;
        --border: #cfd8dc;
        --card-bg: #ffffff;
        --shadow-color: rgba(0, 0, 0, 0.1);
        --disabled-bg: #e0e0e0;
        --disabled-text: #9e9e9e;
        --transition-speed: 0.3s;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      /* Estilos do Body e Main Container */
      body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
        color: var(--text);
        padding: 30px 15px;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }

      .main-container {
        max-width: 850px;
        width: 100%;
      }

      /* CSS Original Fornecido (Quiz, Results, etc.) - Mantido como no original */
      .quiz-card, .results-card {
        background-color: var(--card-bg);
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        padding: 35px;
        margin-bottom: 30px;
        animation: slideUpFadeIn 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        opacity: 0;
      }

      .quiz-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border);
      }

      .quiz-title {
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--primary);
      }

      .question-counter {
        font-size: 0.9rem;
        font-weight: 600;
        background-color: #e3f2fd;
        color: var(--primary-dark);
        padding: 5px 12px;
        border-radius: 15px;
      }

      #question-text {
        font-size: 1.15rem;
        margin-bottom: 25px;
        line-height: 1.6;
        font-weight: 600;
      }

      .image-container {
        margin-bottom: 25px;
        text-align: center;
      }

      .image-container img {
        max-width: 100%;
        max-height: 400px;
        border-radius: 10px;
        border: 1px solid var(--border);
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: zoom-in;
      }

      .image-container img:hover {
        transform: scale(1.03);
        box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      }

      .image-modal {
        display: none;
        position: fixed;
        z-index: 1001;
        padding-top: 50px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.9);
        animation: fadeInModal 0.3s ease;
      }

      .modal-content { /* Este é para o modal da imagem, não confundir com o pin-modal-content */
        margin: auto;
        display: block;
        max-width: 90%;
        max-height: 90vh;
        animation: zoomInModal 0.3s ease;
      }

      .close-modal {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
        cursor: pointer;
      }

      .close-modal:hover, .close-modal:focus {
        color: #bbb;
        text-decoration: none;
      }

      .options {
        list-style: none;
        margin-top: 20px;
      }

      .options li {
        margin-bottom: 15px;
      }

      .option {
        background-color: #f1f3f5;
        padding: 15px 20px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        border: 2px solid transparent;
        display: flex;
        align-items: baseline;
      }

      .option-letter {
        font-weight: 700;
        margin-right: 10px;
        color: var(--primary);
      }

      .option:hover {
        background-color: #e9ecef;
        border-color: var(--primary);
        transform: translateX(5px);
      }

      .option.selected {
        border-color: var(--primary-dark);
        background-color: #d1e3ff;
      }

      .option.correct {
        border-color: var(--accent) !important;
        background-color: var(--accent-light) !important; /* Usando a variável ajustada */
        color: #1b5e20; /* Texto mais escuro para contraste */
        font-weight: 600;
      }
      .option.correct .option-letter { color: #1b5e20; } /* Ajuste para consistência */


      .option.incorrect {
        border-color: var(--danger) !important;
        background-color: var(--danger-light) !important;
        color: #c62828;
        font-weight: 600;
      }
      .option.incorrect .option-letter { color: var(--danger); }


      .options.disabled .option {
        pointer-events: none;
        opacity: 0.8;
      }

      .options.disabled .option:not(.selected):not(.correct) {
        background-color: #f8f9fa;
        opacity: 0.7;
      }

      .button-container {
        text-align: right;
        margin-top: 30px;
      }

      .button {
        background-color: var(--primary);
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1rem;
        transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 10px rgba(41, 121, 255, 0.3);
        text-decoration: none;
        display: inline-block;
      }

      .button:hover {
        background-color: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(41, 121, 255, 0.4);
      }

      .button:active {
        transform: translateY(0);
        box-shadow: 0 4px 10px rgba(41, 121, 255, 0.3);
      }

      .button:disabled {
        background-color: var(--disabled-bg);
        color: var(--disabled-text);
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }

      .results-card h2 {
        color: var(--primary);
        margin-bottom: 15px;
        text-align: center;
        font-size: 1.8rem;
      }

      .results-card p {
        text-align: center;
        font-size: 1.1rem;
        margin-bottom: 30px;
        color: var(--text-light);
      }

      .chart-container {
        width: 100%;
        max-width: 400px;
        margin: 0 auto 30px auto;
      }

      /* Pop-up de congratulações e Modal de PIN compartilham animações */
      .congrats-popup { /* Também usado como base para o pin-modal-container */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.8);
        display: flex; /* Modificado para flex para centralizar melhor */
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        animation: fadeIn 0.5s;
        opacity: 1; /* Garante que começa visível se 'flex' for o display inicial */
      }

      .congrats-content { /* Também usado como base para o pin-modal-content */
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        max-width: 90%;
        text-align: center;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        animation: slideUpFadeIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      }

      .congrats-message {
        font-size: 1.5rem;
        margin-bottom: 20px;
        color: var(--primary);
        font-weight: bold;
      }

      .close-popup {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
      }

      /* Animações */
      @keyframes slideUpFadeIn {
        from { opacity: 0; transform: translateY(40px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes fadeInModal { /* Para o modal da imagem */
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes zoomInModal { /* Para o conteúdo do modal da imagem */
        from { transform: scale(0.7); }
        to { transform: scale(1); }
      }
      @keyframes fadeIn { /* Usado pelo popup de congratulações e modal de PIN */
        from { opacity: 0; }
        to { opacity: 1; }
      }

      /* Estilos Adicionais para a Homepage (como fornecido) */
      .homepage-card {
        background-color: var(--card-bg);
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        padding: 35px;
        margin-top: 20px;
        margin-bottom: 30px;
        animation: slideUpFadeIn 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        opacity: 0; /* Inicia oculto para animação */
        width: 100%;
      }

      .app-header {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 35px;
        padding-bottom: 25px;
        border-bottom: 1px solid var(--border);
      }

      .app-icon-placeholder {
        width: 80px;
        height: 80px;
        margin-bottom: 20px;
      }
      .app-icon-placeholder svg { width: 100%; height: 100%; }
      .app-title {
        font-size: 2.2rem;
        font-weight: 700;
        color: var(--primary-dark);
        text-align: center;
      }
      .app-menu { display: flex; flex-direction: column; gap: 25px; }
      .theme-section {
        padding: 25px;
        background-color: #fdfdff;
        border-radius: 12px;
        border: 1px solid var(--border);
        box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      }
      .theme-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #e0e0e0;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .section-icon {
        width: 26px;
        height: 26px;
        margin-right: 10px;
        color: var(--primary);
        flex-shrink: 0;
      }
      /* Ajuste para que botões e links estilizados como botões se comportem da mesma forma */
      .theme-section .button, .theme-section a.button {
        display: block;
        width: 100%;
        margin-bottom: 15px;
        text-align: center;
      }
      .theme-section .button:last-child, .theme-section a.button:last-child {
        margin-bottom: 0;
      }

      /* Estilos para o Modal de PIN */
      .pin-modal-container {
          display: none; /* Começa escondido, será mostrado por JS */
          position: fixed;
          z-index: 2000;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          overflow: auto; /* Para permitir rolagem se o conteúdo for muito grande, embora não deva ser */
          background-color: rgba(0,0,0,0.7);
          justify-content: center; /* Centraliza horizontalmente */
          align-items: center; /* Centraliza verticalmente */
          animation: fadeIn 0.3s ease; /* Usando animação existente */
      }

      .pin-modal-content {
          background-color: var(--card-bg);
          color: var(--text);
          padding: 30px 35px;
          border-radius: 12px;
          box-shadow: 0 8px 25px rgba(0,0,0,0.15);
          width: 90%;
          max-width: 400px;
          text-align: center;
          /* Animação ao aparecer */
          animation: slideUpFadeIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
          opacity: 0; /* Começa invisível para a animação funcionar */
      }

      .pin-modal-content h2 {
          color: var(--primary-dark); /* Título mais destacado */
          margin-bottom: 15px;
          font-size: 1.7rem; /* Tamanho um pouco maior */
      }

      .pin-modal-content p {
          font-size: 1rem;
          color: var(--text-light);
          margin-bottom: 25px; /* Mais espaço antes do input */
      }

      #pinInput {
          width: calc(100% - 24px); /* Ajuste para padding interno */
          padding: 14px; /* Mais padding para toque fácil */
          margin-bottom: 25px; /* Mais espaço antes do botão */
          border: 1px solid var(--border);
          border-radius: 8px;
          font-size: 1.1rem; /* Fonte maior para o PIN */
          text-align: center;
          font-family: 'Poppins', sans-serif; /* Garante a fonte */
          transition: border-color 0.3s ease, box-shadow 0.3s ease;
      }

      #pinInput:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(41, 121, 255, 0.25); /* Destaque mais visível */
      }

      #submitPinButton {
          background-color: var(--primary);
          color: white;
          padding: 14px 30px;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 600;
          font-size: 1rem;
          transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
          width: 100%;
      }

      #submitPinButton:hover {
          background-color: var(--primary-dark);
          transform: translateY(-1px); /* Efeito sutil ao passar o mouse */
      }

      #pinErrorMessage {
          margin-top: 15px;
          font-size: 0.9rem;
          font-weight: 600;
          color: var(--danger);
          min-height: 1.2em; /* Reserva espaço para a mensagem, evitando saltos no layout */
          display: block; /* Mudar para block e controlar visibilidade com opacidade ou conteúdo */
          visibility: hidden; /* Escondido por padrão, mas ocupando espaço */
      }


      /* Media Queries (original + ajustes) */
      @media (max-width: 600px) {
        body { padding: 20px 10px; }
        .quiz-card, .results-card, .homepage-card { padding: 20px; }
        .quiz-title { font-size: 1.4rem; }
        #question-text { font-size: 1.05rem; }
        .option { padding: 12px 15px; }
        .button { padding: 10px 20px; font-size: 0.95rem;}
        .results-card h2 { font-size: 1.5rem; }
        .results-card p { font-size: 1rem; }
        .app-title { font-size: 1.8rem; }
        .theme-title { font-size: 1.3rem; }
        .section-icon { width: 22px; height: 22px; margin-right: 8px;}

        .pin-modal-content { padding: 25px 20px; }
        .pin-modal-content h2 { font-size: 1.5rem; }
        #pinInput { padding: 12px; font-size: 1rem; }
        #submitPinButton { padding: 12px 25px; }
      }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="homepage-card">
            <header class="app-header">
                <div class="app-icon-placeholder">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="iconGradientHeader" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:var(--primary-dark);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:var(--primary);stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <path d="M5 55 Q50 35 95 55 L50 75 Z" fill="url(#iconGradientHeader)"/>
                        <rect x="0" y="25" width="100" height="15" rx="2" fill="url(#iconGradientHeader)"/>
                        <line x1="80" y1="40" x2="80" y2="60" stroke="var(--accent)" stroke-width="3"/>
                        <circle cx="80" cy="60" r="4" fill="var(--accent)"/>
                        <circle cx="50" cy="32.5" r="5" fill="#FFFFFF"/>
                    </svg>
                </div>
                <h1 class="app-title">Plataforma de Estudos</h1>
            </header>

            <main class="app-menu">
                <section class="theme-section">
                    <h2 class="theme-title">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <title>Ícone de Provas</title>
                            <path d="M17 3H7C5.89543 3 5 3.89543 5 5V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V5C19 3.89543 18.1046 3 17 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 7H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 11H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 15H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.5 14.5L14.5 15.5L16.5 13.5" stroke="var(--accent)" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Simulados e Provas
                    </h2>
                    <button type="button" class="button" data-target-id="btnProvaMorfo">Prova de Morfofisiologia</button>
                    <button type="button" class="button" data-target-id="btnProvaAPS">Prova de APS</button>
                    <button type="button" class="button" data-target-id="btnProvaFarmaco">Prova de Farmacologia</button>
                    <button type="button" class="button" data-target-id="btnProvaOSCE">Prova OSCE</button>
                </section>

                <section class="theme-section">
                    <h2 class="theme-title">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <title>Ícone de Calculadora</title>
                            <rect x="5" y="3" width="14" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                            <rect x="7" y="6" width="10" height="4.5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="8.5" cy="13.5" r="1" fill="currentColor"/>
                            <circle cx="12" cy="13.5" r="1" fill="currentColor"/>
                            <circle cx="15.5" cy="13.5" r="1" fill="currentColor"/>
                            <circle cx="8.5" cy="17.5" r="1" fill="currentColor"/>
                            <circle cx="12" cy="17.5" r="1" fill="currentColor"/>
                            <circle cx="15.5" cy="17.5" r="1" fill="currentColor"/>
                        </svg>
                        Ferramentas
                    </h2>
                    <button type="button" class="button" data-target-id="btnCalculadora">Calculadora Acadêmica</button>
                </section>
            </main>
        </div>
    </div>

    <div id="pinModalContainer" class="pin-modal-container">
        <div class="pin-modal-content">
            <h2>Acesso Restrito</h2>
            <p>Por favor, insira seu PIN para continuar:</p>
            <input type="password" id="pinInput" placeholder="Seu PIN">
            <button type="button" id="submitPinButton">Acessar</button>
            <p id="pinErrorMessage"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pinModalContainer = document.getElementById('pinModalContainer');
            const pinInput = document.getElementById('pinInput');
            const submitPinButton = document.getElementById('submitPinButton');
            const pinErrorMessage = document.getElementById('pinErrorMessage');
            const mainContentButtons = document.querySelectorAll('.app-menu .button');

            const localStorageKeyAccess = 'studyAppAccessGranted_v2'; // Mudei para v2 para invalidar acessos antigos com PINs diferentes, se necessário.

            // Lista de 50 PINs válidos (fornecida por você)
            const validPins = [
                "AP7361Q", "ZR2905D", "KX5018P", "VB1172M", "CJ9843G", "HU6709R", "NF4551B", "OW3216T", "QS8823Y", "LM0574A",
                "FY1980X", "GT6247E", "RD3092W", "PI7715J", "SC5368U", "BX8021O", "EK9154I", "JZ2407C", "YV0730N", "MW4696F",
                "UL1859V", "DP6073S", "GQ9510H", "IO3386Z", "TE2642K", "AM7019L", "RW5275B", "FX0981P", "KY4138G", "NB8704M",
                "OJ1460D", "PL5627R", "SH9933T", "UZ7289Y", "VT2556A", "WE6112X", "XK3778E", "YC0445W", "ZI8001J", "BS4367U",
                "CF1034O", "DG5990I", "EJ2256C", "HM6813N", "IP0179F", "JR4735V", "KU8391S", "LV1658H", "MX5214Z", "NY9870K"
            ];

            const targetUrls = {
                btnProvaMorfo: "https://inaciomaximoo.github.io/treino/morfom3.html",
                btnProvaAPS: "https://inaciomaximoo.github.io/treino/aps.html",
                btnProvaFarmaco: "https://inaciomaximoo.github.io/treino/farmaco.html",
                btnCalculadora: "https://inaciomaximoo.github.io/treino/calculadora.html",
                btnProvaOSCE: null // Prova OSCE sem URL definida por enquanto
            };

            function showPinModal() {
                pinModalContainer.style.display = 'flex';
                setTimeout(() => {
                    pinModalContainer.querySelector('.pin-modal-content').style.opacity = '1';
                }, 10);
                pinInput.focus();
            }

            function hidePinModal() {
                pinModalContainer.querySelector('.pin-modal-content').style.opacity = '0';
                setTimeout(() => {
                    pinModalContainer.style.display = 'none';
                }, 300);
            }

            function grantAccess() {
                localStorage.setItem(localStorageKeyAccess, 'true');
                hidePinModal();
                mainContentButtons.forEach(button => {
                    button.disabled = false;
                });
                pinErrorMessage.textContent = '';
                pinErrorMessage.style.visibility = 'hidden';
            }

            function handlePinSubmit() {
                const enteredPin = pinInput.value.trim().toUpperCase();
                if (validPins.includes(enteredPin)) {
                    grantAccess();
                } else {
                    pinErrorMessage.textContent = 'PIN inválido. Tente novamente.';
                    pinErrorMessage.style.visibility = 'visible';
                    pinInput.value = '';
                    pinInput.focus();
                }
            }

            function handleMainButtonClick(event) {
                const targetId = event.target.dataset.targetId;
                if (targetId && targetUrls[targetId]) {
                    window.location.href = targetUrls[targetId];
                } else if (targetId === 'btnProvaOSCE' && targetUrls[targetId] === null) {
                    alert('A Prova OSCE ainda não está disponível.');
                } else {
                    console.warn(`Nenhuma URL de destino para o botão com ID: ${targetId}`);
                }
            }

            // Lógica Principal
            if (localStorage.getItem(localStorageKeyAccess) === 'true') {
                hidePinModal();
                mainContentButtons.forEach(button => {
                    button.disabled = false;
                    button.addEventListener('click', handleMainButtonClick);
                });
            } else {
                showPinModal();
                mainContentButtons.forEach(button => {
                    button.disabled = true;
                });

                const processPinSubmission = () => {
                    handlePinSubmit();
                    if (localStorage.getItem(localStorageKeyAccess) === 'true') {
                        mainContentButtons.forEach(button => {
                            button.disabled = false;
                            button.addEventListener('click', handleMainButtonClick);
                        });
                    }
                };
                
                submitPinButton.addEventListener('click', processPinSubmission);
                pinInput.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter') {
                        processPinSubmission();
                    }
                });
            }
        });
    </script>
</body>
</html>
